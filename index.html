<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>naser.ir</title>

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
body{margin:0;font-family:tahoma}
#login{height:100vh;display:flex;align-items:center;justify-content:center}
#app{display:none;height:100vh}
.box{border:1px solid #ccc;padding:20px;width:280px}
input,button{width:100%;padding:8px;margin:5px 0}
#map{height:100%}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
  <div class="box">
    <h3>ورود</h3>
    <input id="u" placeholder="user">
    <input id="p" placeholder="password" type="password">
    <button onclick="doLogin()">ورود</button>
    <div id="err" style="color:red"></div>
  </div>
</div>

<!-- APP -->
<div id="app">
  <div id="map"></div>
</div>

<script>
/* ===== AUTH ===== */
const USER="naser";
const PASS="12345";

if(localStorage.logged==="1"){
  showApp();
}

function doLogin(){
  if(u.value===USER && p.value===PASS){
    localStorage.logged="1";
    showApp();
  }else{
    err.innerText="یوزر یا پسورد اشتباه است";
  }
}

function showApp(){
  login.style.display="none";
  app.style.display="block";
  initMap();
}

/* ===== MAP ===== */
function initMap(){
  const map=L.map('map').setView([35.7,51.4],10);

  /* اگر API نشان داشتی */
  L.tileLayer(
   'https://static.neshan.org/sdk/leaflet/v1/tiles/default/{z}/{x}/{y}.png',
   {maxZoom:19}
  ).addTo(map);

  /* تست کلیک */
  map.on('click',e=>{
    L.marker(e.latlng).addTo(map)
      .bindPopup(`انبار<br>${e.latlng.lat}, ${e.latlng.lng}`)
      .openPopup();
  });
}
</script>

</body>
</html>
